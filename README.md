# 3D-engine
## Возможности пользователя
#### Добавлять для отображения треугольные плоскости с заданными координатами вершин, создавать объединения треугольных плоскостей, после чего можно будет разместить фигуру созданную из объединения этих плоскостей и свободно перемещаться в пространстве с ними.
## Реализация
#### Вся отрисовка будет происходить с помощью треугольников, как простейшей 2д фигуры имеющей ширину. 
#### Будем использовать нормализованную относительно центра экрана систему координат, где левый верхний угол имеет координаты (-1, -1), а правый нижний (1, 1), таким образом объект у которого одна из координат по модулю больше 1 отрисовываться не будет.
### Проецирование 3D вершин в 2D для отображения на экране
#### т.к. высота и ширина могут быть разными, то мы будем использовать коэффицент соотношения сторон h/w, таким образом [x, y, z] => [x*h/w, y, z] 
#### Пусть O - угол нашего поля видимости, тогда чем меньше поле видимости, тем больше пространства в нем будет занимать объект, то есть, тем больше он будет в 2D проекции, для этого будем использовать коэффицент 1/tan(O/2), тогда [x, y, z] => [x * h/w * 1/tan(O/2), y * 1/tan(O/2), Z]
#### Z - дальность объекта, Коэффицент для корректировки Z будет вычисляться с учетом максимальной - Zf и минимальной - Zn дальности видимости: Zf/(Zf - Zn), однако т.к. Zn != 0 (глаза удалены на расстояние от головы и имеют какую-то минимальную != 0 ширину обзора), то будем пользоваться корректировкой: Zf / (Zf - Zn) - Zf * Zn / (Zf - Zn): [x, y, z] => [x * h/w * 1/tan(O/2), y * 1/tan(O/2), Z *  Zf / (Zf - Zn) - Zf * Zn / (Zf - Zn)]
#### Чем дальше объекты (чем больше Z) тем меньше они смещаются на 2D проекции, тогда:  [x, y, z] => [(x * h/w * 1/tan(O/2)) / Z, (y * 1/tan(O/2)) / Z, Z *  Zf / (Zf - Zn) - Zf * Zn / (Zf - Zn)]
#### пусть a = h/w, F = 1 / tan(O / 2), q = Zf / (Zf - Zn), тогда [x, y, z] = > [x * ((a * F) / z), y * (F / z), Z * q - Zn * q]
